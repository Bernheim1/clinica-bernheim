"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[392],{6392:(J,p,s)=>{s.r(p),s.d(p,{EspecialistaModule:()=>E});var l=s(8583),u=s(5496),m=s(8239),d=s(1102),g=s(3098),f=s.t(g,2),i=s(3018),h=s(5391),_=s(7556);function x(t,a){if(1&t){const e=i.EpF();i.TgZ(0,"div",5),i.TgZ(1,"div",6),i.TgZ(2,"h4"),i._uU(3,"Paciente"),i.qZA(),i.TgZ(4,"div",7),i.TgZ(5,"h4",8),i._uU(6),i.qZA(),i._UZ(7,"img",9),i.TgZ(8,"button",10),i.NdJ("click",function(){const c=i.CHM(e).$implicit;return i.oxw(2).seleccionarPaciente(c)}),i._uU(9,"Selecionar"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&t){const e=a.$implicit;i.xp6(6),i.Oqu(e.nombre+" "+e.apellido),i.xp6(1),i.Q6J("src",e.fotoPerfil,i.LSH)}}function Z(t,a){if(1&t&&(i.TgZ(0,"div",2),i.TgZ(1,"h2"),i._uU(2,"Seleccione pacientes"),i.qZA(),i.TgZ(3,"div",3),i.YNc(4,x,10,2,"div",4),i.qZA(),i.qZA()),2&t){const e=i.oxw();i.xp6(4),i.Q6J("ngForOf",e.pacientesValidos)}}function v(t,a){1&t&&(i.TgZ(0,"li",19),i._uU(1,"Estado: Sin aceptar"),i.qZA())}function T(t,a){1&t&&(i.TgZ(0,"li",19),i._uU(1,"Estado: Aceptado"),i.qZA())}function P(t,a){1&t&&(i.TgZ(0,"li",19),i._uU(1,"Estado: Cancelado"),i.qZA())}function C(t,a){if(1&t&&(i.TgZ(0,"li",19),i._uU(1),i.qZA()),2&t){const e=i.oxw().$implicit;i.xp6(1),i.hij("Comentario: ",e.comentarioCancelado,"")}}function b(t,a){1&t&&(i.TgZ(0,"li",19),i._uU(1,"Estado: Realizado"),i.qZA())}function A(t,a){1&t&&(i.TgZ(0,"li",19),i._uU(1,"Estado: Rechazado"),i.qZA())}function S(t,a){if(1&t&&(i.TgZ(0,"li",19),i._uU(1),i.qZA()),2&t){const e=i.oxw().$implicit;i.xp6(1),i.hij("Comentario: ",e.comentarioRechazado,"")}}function q(t,a){if(1&t&&(i.TgZ(0,"div",17),i.TgZ(1,"h4"),i._uU(2,"Turno"),i.qZA(),i.TgZ(3,"div",7),i.TgZ(4,"h4",8),i._uU(5),i.qZA(),i.TgZ(6,"ul",18),i.TgZ(7,"li",19),i._uU(8),i.qZA(),i.TgZ(9,"li",19),i._uU(10),i.qZA(),i.YNc(11,v,2,0,"li",20),i.YNc(12,T,2,0,"li",20),i.YNc(13,P,2,0,"li",20),i.YNc(14,C,2,1,"li",20),i.YNc(15,b,2,0,"li",20),i.YNc(16,A,2,0,"li",20),i.YNc(17,S,2,1,"li",20),i.qZA(),i.qZA(),i.qZA()),2&t){const e=a.$implicit;i.xp6(5),i.Oqu(e.dia+" "+e.hora),i.xp6(3),i.hij("Especialidad: ",e.especialidad,""),i.xp6(2),i.hij("Paciente: ",e.paciente,""),i.xp6(1),i.Q6J("ngIf",!(e.aceptado||e.cancelado||e.realizado||e.rechazado)),i.xp6(1),i.Q6J("ngIf",e.aceptado&&!e.cancelado&&!e.realizado&&!e.rechazado),i.xp6(1),i.Q6J("ngIf",e.cancelado),i.xp6(1),i.Q6J("ngIf",e.cancelado&&null!=e.comentarioCancelado),i.xp6(1),i.Q6J("ngIf",e.realizado),i.xp6(1),i.Q6J("ngIf",e.rechazado),i.xp6(1),i.Q6J("ngIf",e.rechazado&&null!=e.comentarioRechazado)}}function y(t,a){if(1&t&&(i.TgZ(0,"h4"),i._uU(1),i.qZA()),2&t){const e=a.$implicit;i.xp6(1),i.AsE("",e.clave,": ",e.valor,"")}}function U(t,a){if(1&t&&(i.TgZ(0,"div",5),i.TgZ(1,"div",21),i.TgZ(2,"h4"),i._uU(3),i.qZA(),i.TgZ(4,"h4"),i._uU(5),i.qZA(),i.TgZ(6,"h4"),i._uU(7),i.qZA(),i.TgZ(8,"h4"),i._uU(9),i.qZA(),i.YNc(10,y,2,2,"h4",22),i.qZA(),i.qZA()),2&t){const e=a.$implicit;i.xp6(3),i.hij("Altura: ",e.altura,""),i.xp6(2),i.hij("Peso: ",e.peso,""),i.xp6(2),i.hij("Temperatura: ",e.temperatura,""),i.xp6(2),i.hij("Presion: ",e.presion,""),i.xp6(1),i.Q6J("ngForOf",e.claveValor)}}function w(t,a){if(1&t){const e=i.EpF();i.TgZ(0,"div",2),i.TgZ(1,"div",11),i.TgZ(2,"div",12),i.TgZ(3,"h2"),i._uU(4),i.qZA(),i.qZA(),i.TgZ(5,"button",13),i.NdJ("click",function(){return i.CHM(e),i.oxw().descargarPDF()}),i._uU(6,"Descargar PDF"),i.qZA(),i.TgZ(7,"button",14),i.NdJ("click",function(){return i.CHM(e),i.oxw().cerrarHistoriaClinica()}),i._uU(8,"Cerrar"),i.qZA(),i.qZA(),i.TgZ(9,"div",15),i.YNc(10,q,18,10,"div",16),i.qZA(),i._UZ(11,"hr"),i.TgZ(12,"div",3),i.YNc(13,U,11,5,"div",4),i.qZA(),i.qZA()}if(2&t){const e=i.oxw();i.xp6(4),i.Oqu(e.pacienteSeleccionado.nombre+" "+e.pacienteSeleccionado.apellido),i.xp6(6),i.Q6J("ngForOf",e.turnosPaciente),i.xp6(3),i.Q6J("ngForOf",e.pacienteSeleccionado.historiaClinica)}}const F=[{path:"seccionPacientes",component:(()=>{class t{constructor(e,n,o){this.db=e,this.auth=n,this.datePipe=o,this.mostrarPacientes=!0,this.mostrarHistoriaClinica=!1,this.pacientesValidos=[],this.turnosPaciente=[],this.coleccion=this.db.collection("usuarios"),this.usuarios=this.coleccion.valueChanges({idField:"id"}),this.coleccion=this.db.collection("turnos"),this.turnos=this.coleccion.valueChanges({idField:"id"})}ngOnInit(){this.usuarios.subscribe(e=>{this.usuariosBD=e}),this.turnos.subscribe(e=>{this.turnosBD=e,this.validarPacientes()})}seleccionarPaciente(e){this.pacienteSeleccionado=e,this.validarTurnosPaciente(),this.mostrarPacientes=!1,this.mostrarHistoriaClinica=!0}validarPacientes(){let o,e=[],n=[];for(let c of this.turnosBD)c.dniEspecialista==this.auth.currentUser.dni&&(o=e.indexOf(c.dniPaciente),-1==o&&e.push(c.dniPaciente));for(let c of this.usuariosBD)e.includes(c.dni)&&n.push(c);console.log(n),this.pacientesValidos=n}validarTurnosPaciente(){this.turnosPaciente=[];for(let e of this.turnosBD)e.dniPaciente==this.pacienteSeleccionado.dni&&e.dniEspecialista==this.auth.currentUser.dni&&this.turnosPaciente.push(e)}descargarPDF(){var e=this;return(0,m.Z)(function*(){d.pp.setFonts(f);const n=new d.pp;n.add(yield new d.Img("./../../../../assets/especialidadDefault.png").width(100).alignment("center").build());let c,o=new Date;c=e.datePipe.transform(o,"dd/MM/yyyy"),n.pageSize("A4"),n.pageMargins(40),n.add({text:"Clinica Bernheim",alignment:"center",fontSize:22,bold:!0,margin:[50,20]}),n.add({text:c,alignment:"center",fontSize:22,bold:!0,margin:[50,20]}),n.add({text:"Historia clinica paciente: "+e.pacienteSeleccionado.nombre+" "+e.pacienteSeleccionado.apellido,alignment:"center",fontSize:22,bold:!0,margin:[50,20]}),n.add(e.createTable()),n.create().download()})()}createTable(){return this.formatDataToTable(),new d.Table(this.tabla).alignment("center").end}formatDataToTable(){let e=[];for(let n of this.turnosPaciente)null!=n.historiaClinica&&e.push(n);this.tabla=e.map(n=>{let o=[],c=[];o.push("Fecha: "+n.dia+" "+n.hora+"\nEspecialidad: "+n.especialidad+"\n"),o.push("Altura: "+n.historiaClinica.altura+"\nPeso: "+n.historiaClinica.peso+"\nTemperatura: "+n.historiaClinica.temperatura+"\nPresion: "+n.historiaClinica.presion+"\n");for(let r of n.historiaClinica.claveValor)null!=r.clave&&null!=r.valor&&c.push(r.clave+": "+r.valor+"\n");return 0!=c.length&&o.push(c),o})}cerrarHistoriaClinica(){this.mostrarHistoriaClinica=!1,this.mostrarPacientes=!0}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(h.ST),i.Y36(_.e),i.Y36(l.uU))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-seccion-pacientes"]],decls:3,vars:2,consts:[["class","container card slide-in-elliptic-top-fwd","style","padding: 20px; border-radius: 15px; margin-top: 150px;",4,"ngIf"],[1,"fullscreen-bg"],[1,"container","card","slide-in-elliptic-top-fwd",2,"padding","20px","border-radius","15px","margin-top","150px"],[1,"row","mx-0",2,"justify-content","center"],["style","justify-content: center; width: 18rem; margin-top: 20px",4,"ngFor","ngForOf"],[2,"justify-content","center","width","18rem","margin-top","20px"],[1,"card",2,"border-radius","15px","padding","10px","width","100%","height","100%"],[1,"card-body"],[1,"card-title"],["alt","Card image cap",1,"rounded-circle","img-fluid","card-img-top",2,"width","150px","height","150px","display","block","margin","0",3,"src"],["type","button",1,"btn","btn-primary","btn-lg","text-white",2,"margin","5px",3,"click"],[1,"d-flex"],[1,"flex-grow-1"],["type","button",1,"btn","btn-success","btn-lg","text-white",2,"margin","5px",3,"click"],["type","button",1,"btn","btn-danger","btn-lg","text-white",2,"margin","5px",3,"click"],[1,"row","justify-content-center"],["class","card col-md-5 justify-content-center","style","border-radius: 15px; padding: 10px; width: 100%; height: 100%; margin: 10px",4,"ngFor","ngForOf"],[1,"card","col-md-5","justify-content-center",2,"border-radius","15px","padding","10px","width","100%","height","100%","margin","10px"],[1,"list-group","list-group-flush"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],[1,"card","d-block",2,"border-radius","15px","padding","10px"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(i.YNc(0,Z,5,1,"div",0),i.YNc(1,w,14,3,"div",0),i._UZ(2,"div",1)),2&e&&(i.Q6J("ngIf",n.mostrarPacientes),i.xp6(1),i.Q6J("ngIf",n.mostrarHistoriaClinica))},directives:[l.O5,l.sg],styles:[".fullscreen-bg[_ngcontent-%COMP%]{position:fixed;z-index:-1;top:0;right:0;bottom:0;left:0;background:url(fondoClinica.2e5db6a8cafece6399e0.png) center;background-size:cover}.slide-in-elliptic-top-fwd[_ngcontent-%COMP%]{animation:slide-in-elliptic-top-fwd .7s cubic-bezier(.25,.46,.45,.94) both}@keyframes slide-in-elliptic-top-fwd{0%{transform:translateY(-600px) rotateX(-30deg) scale(0);transform-origin:50% 100%;opacity:0}to{transform:translateY(0) rotateX(0) scale(1);transform-origin:50% 1400px;opacity:1}}"]}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[u.Bz.forChild(F)],u.Bz]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[l.ez,z]]}),t})()}}]);